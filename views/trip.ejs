<div class="container my-5">

  
  <a href="/search?q=back" class="btn btn-outline-secondary mb-4">
    ‚Üê Back to results
  </a>

  
  <div class="row mb-4">

    
    <div class="col-md-6">
      <img
        src="<%= trip.image %>"
        alt="<%= trip.name %>"
        class="img-fluid rounded shadow"
        style="width:100%; height:380px; object-fit:cover;"
      />
    </div>


    <div class="col-md-6">
      <h2 class="fw-bold"><%= trip.name %></h2>
      <p class="text-muted mb-1"><%= trip.location %></p>

      <p class="mb-2">
        ‚≠ê <strong><%= trip.rating %></strong>
        <span class="text-muted">
          (<%= trip.reviewsCount %> reviews)
        </span>
      </p>

      <h4 class="text-success fw-bold">
        ‚Çπ <%= trip.price %>
        <span class="fs-6 text-muted">/ night</span>
      </h4>

      
      <% if (trip.whyThisHotel) { %>
        <div class="alert alert-info mt-3 shadow-sm">
          <strong>Why this hotel?</strong><br/>
          <%= trip.whyThisHotel %>
        </div>
      <% } %>

      <p class="mt-3"><%= trip.description %></p>

     
      <div class="mt-4 d-flex gap-2">
        <button
          class="btn btn-success"
          data-bs-toggle="modal"
          data-bs-target="#bookingModal"
        >
          Continue to Booking
        </button>

        <form action="/saved/add/<%= trip.id %>" method="POST">
  <button class="btn btn-outline-primary">
    Save Trip
  </button>
</form>

      </div>

      <p class="text-muted small mt-2">
        *Booking powered by external partners (demo experience)
      </p>
    </div>
  </div>

  <div class="row mt-4">

    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <h6 class="fw-bold">üè® Amenities</h6>
          <ul class="mb-0">
            <% (trip.amenities || []).forEach(a => { %>
              <li><%= a %></li>
            <% }) %>
          </ul>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <h6 class="fw-bold">üéØ Ideal For</h6>
          <ul class="mb-0">
            <% (trip.details?.idealFor || []).forEach(i => { %>
              <li><%= i %></li>
            <% }) %>
          </ul>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <h6 class="fw-bold">üìç Nearby Places</h6>
          <ul class="mb-0">
            <% (trip.details?.nearby || []).forEach(n => { %>
              <li><%= n %></li>
            <% }) %>
          </ul>
        </div>
      </div>
    </div>

  </div>

  <div class="mt-5">
    <h5 class="fw-bold mb-2">üìç Location on Map</h5>

    <iframe
      width="100%"
      height="320"
      style="border-radius:12px"
      loading="lazy"
      src="https://www.openstreetmap.org/export/embed.html?bbox=<%= trip.lng-0.05 %>,<%= trip.lat-0.05 %>,<%= trip.lng+0.05 %>,<%= trip.lat+0.05 %>&layer=mapnik&marker=<%= trip.lat %>,<%= trip.lng %>">
    </iframe>
  </div>

</div>


<div class="modal fade" id="bookingModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Continue to Booking</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <p class="mb-1">You are about to continue booking for:</p>

    <h6 class="fw-bold mb-0"><%= trip.name %></h6>
    <p class="text-muted mb-2"><%= trip.location %></p>


        <ul class="small">
          <li>Best available price</li>
          <li>Verified reviews</li>
          <li>Secure checkout</li>
        </ul>

        <p class="text-muted small mb-0">
          This is a demo experience ‚Äî no real payment required.
        </p>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button class="btn btn-success">
          Proceed
        </button>
      </div>

    </div>
  </div>
</div>

<script>
  function saveTrip(id) {
    fetch(`/trips/save/${id}`, { method: "POST" })
      .then(() => {
        const btn = document.getElementById("saveBtn");
        btn.innerText = "‚úì Saved";
        btn.classList.remove("btn-outline-primary");
        btn.classList.add("btn-success");
      });
  }
</script>
